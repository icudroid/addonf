<!DOCTYPE html>
<html
       xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/home_layout">
<head layout:fragment="customHead">
    <title>MTZik</title>

    <!-- Meta -->
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>

    <link th:href="@{/img/favicon.png}" rel="icon" />

    <link rel="stylesheet" th:href="@{/lib/chosen-1.0/chosen.css}"/>
    <link rel="stylesheet" th:href="@{/coral/assets/components/library/jquery-ui/css/jquery-ui.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/home.css}"/>

    <script th:src="@{/coral/assets/components/library/jquery/jquery.min.js}"></script>
    <script th:src="@{/coral/assets/components/library/jquery-ui/js/jquery-ui.min.js}"></script>
    <script th:src="@{/coral/assets/components/library/jquery/jquery-migrate.min.js}"></script>
    <script th:src="@{/coral/assets/components/library/modernizr/modernizr.js}"></script>
    <script th:src="@{/coral/assets/components/plugins/less-js/less.min.js}"></script>
    <script th:src="@{/coral/assets/components/modules/admin/charts/flot/assets/lib/excanvas.js}"></script>
    <script th:src="@{/coral/assets/components/plugins/browser/ie/ie.prototype.polyfill.js}"></script>

    <script th:src="@{/lib/chosen-1.0/chosen.jquery.js}"></script>

    <script>
        var addonf = {};
    </script>

    <script th:inline="javascript">
        addonf.base = [[@{/}]];
        addonf.static = [[${staticUrl}]];
        addonf.token = [[${_csrf.token}]];
    </script>

    <script src="audio.js" th:src="@{/js/addonf/audio.js}"></script>
    <script src="login.js" th:src="@{/js/addonf/login.js}"></script>
    <script src="audio.js" th:src="@{/js/addonf/search.js}"></script>

    <style type="text/css" th:inline="text">
        .ui-front{
            z-index: 1500;
        }
        .chosen-container-single .chosen-single {
            height: 32px;
            line-height: 31px;
        }
        .chosen-container-single .chosen-single div b {
            background: url("[[@{/lib/chosen-1.0/chosen-sprite.png}]]") no-repeat scroll 0 6px rgba(0, 0, 0, 0);
        }
        .chosen-container-single .chosen-single abbr {
            top:10px;
        }
    </style>


    <script>
        $(function(){
            $(".genre-select").chosen(
                                        {
                                            allow_single_deselect: true ,
                                            no_results_text: "Oops, nothing found!",
                                            inherit_select_classes: true,
                                            width:"100%"
                                        }
                                    );

            $("#previous").click(function(){
                var $page = $("#page");
                $page.val($page.val()-1);
                $("#searchMusics").submit();
                return false;
            });
            $("#next").click(function(){
                var $page = $("#page");
                $page.val($page.val()+1);
                $("#searchMusics").submit();
                return false;
            });
            $("#goPage").click(function(){
                var $page = $("#page");
                $page.val($("#pageNumber").val()-1);
                $("#searchMusics").submit();
                return false;
            });

            $("#bySize").change(function(){
                var $size = $("#size");
                $size.val($(this).val());
                $("#searchMusics").submit();
                return false;
            });





        });
    </script>


</head>

<body>
    <div layout:fragment="content" id="content">

        <div class="container">
            <h3>Recherche</h3>


            <form class="form-inline" role="form" th:action="@{/search/music.html}" th:object="${search}" id="searchMusics">
                <input type="hidden" th:value="${musics.getNumber()}" name="page" id="page"/>
                <input type="hidden" th:value="${musics.getSize()}" name="size" id="size"/>
                <select class="genre-select" th:attr="data-placeholder=#{addonf.genre.select}" th:field="*{genreId}" >
                    <option value="-1"></option>
                    <option th:each="category : ${categories}" th:value="${category.id}"><span th:text="#{'addonf.reference.'+${category.codeGenre}}">Cat√©gorie</span></option>
                </select>
                <div class="separator"></div>
                <div class="input-group col-md-12">
                    <input type="text" placeholder="Titre de la musique ou de l'album" class="form-control" th:field="*{req}" />
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
                        </span>
                </div>

            </form>
        </div>


          <div class="container" th:if="${musics.getTotalElements() > 0}">
              <div th:substituteby="/layout/fragment/musics"></div>

              <div class="row text-center">
                  <div  style="margin-top: 10px;" class="col-md-4 text-center">
                      <a class="btn btn-primary btn-circle" id="previous" href="#" th:if="${musics.hasPreviousPage()}"><i class="fa fa-arrow-left"></i></a>
                  </div>

                  <div class="col-md-4">
                      <div class="col-xs-3">
                          <input type="number" class="form-control" value="0" th:value="${musics.getNumber()+1}" id="pageNumber"/>
                      </div>
                      <div class="col-xs-4">

                        <span style="line-height: 30px;" th:utext="#{addonf.search.result.music.nb(${musics.getTotalPages()})}">&nbsp;sur 15&nbsp;

                          </span>      </div>
                      <div class="col-xs-4">

                          <button id="goPage" class="btn btn-primary" type="submit">Go</button>
                      </div>

                  </div>

                  <div style="margin-top: 10px;" class="col-md-4 text-center">
                      <a class="btn btn-primary btn-circle" id="next" href="#" th:if="${musics.isLastPage()==false}"><i class="fa fa-arrow-right"></i></a>
                  </div>
              </div>

          </div>





    </div>


    <div layout:fragment="customJsInclude">
        <!-- Global -->
        <script>
            var basePath = '',
                    commonPath = '../assets/',
                    rootPath = '../',
                    DEV = false,
                    componentsPath = '../assets/components/';

            var primaryColor = '#eb6a5a',
                    dangerColor = '#b55151',
                    successColor = '#609450',
                    warningColor = '#ab7a4b',
                    inverseColor = '#45484d';

            var themerPrimaryColor = primaryColor;
        </script>



        <script th:src="@{/coral/assets/components/library/bootstrap/js/bootstrap.min.js}"></script>
        <script th:src="@{/coral/assets/components/plugins/holder/holder.js}"></script>
        <script th:src="@{/coral/assets/components/plugins/parallax/stellar/jquery.stellar.min.js}"></script>
        <script th:src="@{/coral/assets/components/plugins/parallax/waypoints/waypoints.min.js}"></script>
        <script th:src="@{/coral/assets/components/plugins/appear/jquery.appear.js}"></script>

    </div>

</body>
</html>
