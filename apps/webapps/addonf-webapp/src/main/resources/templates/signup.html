<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
        xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
        layout:decorator="layout/unlogged"
        ng-app="registrationApp">
<head>
    <title>Inscription</title>

    <link th:href="@{/static/metronic_v2.0.2/corporate/template/assets/plugins/uniform/css/uniform.default.css}"
          rel="stylesheet" type="text/css"/>

    <script type="text/javascript" th:src="@{/static/metronic_v2.0.2/corporate/template/assets/plugins/uniform/jquery.uniform.min.js}"></script>


    <script src="lib/angular/angular.js" th:src="@{/static/lib/angular/angular.js}"></script>
    <script src="lib/angular/angular-animate.js" th:src="@{/static/lib/angular/angular-animate.js}"></script>
    <script src="lib/angular/angular-resource.js" th:src="@{/static/lib/angular/angular-resource.js}"></script>
    <script src="lib/angular/i18n/angular-locale_fr-fr.js" th:src="@{/static/lib/angular/i18n/angular-locale_fr-fr.js}"></script>
    <script src="lib/angular/angular-route.js" th:src="@{/static/lib/angular/angular-route.js}"></script>

    <script th:src="@{/static/lib/angular-bootstrap/ui-bootstrap-tpls.js}"></script>

    <script src="js/controller/registration-controllers.js" th:src="@{/static/js/controller/registration-controllers.js}"></script>

    <script th:inline="javascript">
        $(function(){

            App.initUniform();
        });
    </script>
</head>
<body>
<div layout:fragment="menu" th:substituteby="fragment/menu(activeMenu='home')"></div>

<div layout:fragment="content">
    <div  ng-controller="registrationCtrl">

        <script type="text/ng-template" id="cityTemplate.html">
            <a>
                {{match.model.zipcode}} {{match.model.city}}, {{match.model.country.code}}
            </a>
        </script>

        <form role="form" th:action="@{/signup}" method="post" th:object="${user}" autocomplete="off">
            <div class="form-group" th:class="${#fields.hasErrors('username')}? 'has-error form-group' :'form-group'" >
                <label for="pseudo" class="control-label">Pseudo</label>
                <input type="text" class="form-control" id="pseudo" placeholder="Votre pseudo" th:field="*{username}" ng-required="true"/>
                <p  class="help-block" th:if="${#fields.hasErrors('username')}" th:errors="*{email}">Incorrect</p>
            </div>

            <div class="form-group" th:class="${#fields.hasErrors('password')}? 'has-error form-group' :'form-group'" >
                <label for="passwd" class="control-label">Mot de passe</label>
                <input type="password" class="form-control" id="passwd" placeholder="Votre mot de passe" th:field="*{password}" ng-required="true"/>
                <p  class="help-block" th:if="${#fields.hasErrors('password')}" th:errors="*{email}">Incorrect</p>
            </div>


            <div class="form-group" th:class="${#fields.hasErrors('email')}? 'has-error form-group' :'form-group'" >
                <label for="email" class="control-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="Votre E-mail" th:field="*{email}" ng-required="true"/>
                <p  class="help-block" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Incorrect</p>
            </div>


            <div class="form-group" th:class="${#fields.hasErrors('birthday')}? 'has-error form-group' :'form-group'" >
                <label for="birthdate" class="control-label">Date de naissance</label>
                <input id="birthdate" type="text"
                       datepicker-popup="{{format}}"
                       ng-model="dt"
                       is-open="opened"
                       th:field="*{birthday}"
                       ng-required="true"
                       class="form-control"
                       readonly="true"
                        />
                <p  class="help-block" th:if="${#fields.hasErrors('birthday')}" th:errors="*{email}">Incorrect</p>
            </div>


            <div class="form-group" th:class="${#fields.hasErrors('address')}? 'has-error form-group' :'form-group'">
                <label for="citySearch" class="control-label">Ville</label>
                <input type="hidden" th:field="*{address.city.id}" ng-value="city.id"/>
                <input id="citySearch" type="text" ng-model="city" placeholder="Choisir la ville" typeahead-template-url="cityTemplate.html" typeahead="city as city.label for city in getCitiesByName($viewValue)" typeahead-loading="loadingLocations" class="form-control" typeahead-min-length="2" typeahead-wait-ms="300" ng-required="true"/>
                <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                <p  class="help-block" th:if="${#fields.hasErrors('address')}" th:errors="*{email}">Incorrect</p>
            </div>




            <div class="form-group" th:class="${#fields.hasErrors('sex')}? 'has-error form-group' :'form-group'" >
                <label for="civility" class="control-label">Civilit√©</label>
                <select class="form-control" id="civility" th:field="*{sex}" ng-required="true">
                    <option th:each="civility : ${civilities}" th:text="#{${civility}}" th:value="${civility}">...</option>
                </select>
                <p  class="help-block" th:if="${#fields.hasErrors('sex')}" th:errors="*{email}">Incorrect</p>
            </div>



            <!--                                                    <input type="hidden"
                                                                       th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
            <button class="btn btn-primary btn-block" type="submit">S'enregistrer</button>
        </form>

    </div>

</div>


</body>
</html>